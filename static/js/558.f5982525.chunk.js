"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[558],{9558:(e,i,t)=>{t.r(i),t.d(i,{default:()=>x});var s=t(5043),l=t(8964),r=t(9748),n=t(2019),a=t(9659),u=t(2581),o=t(3188),c=t(2918),h=t(5444),d=t(574),m=t(8797),g=t(3216),p=t(3401),k=t(579);const{Content:j}=l.A,x=()=>{const[e,i]=(0,s.useState)([]),[t,x]=(0,s.useState)(!1),[y,A]=(0,s.useState)(!1),[w]=r.A.useForm(),[b,C]=(0,s.useState)(null),v=(0,g.Zp)();(0,s.useEffect)((()=>{const e=(0,m.hg)(d.j,(e=>{e?i([{uid:e.uid,email:e.email}]):v("/login")}));return()=>e()}),[v]);return(0,k.jsxs)(l.A,{className:"site-layout",children:[(0,k.jsx)("title",{children:"Th\xf4ng tin t\xe0i kho\u1ea3n NISO"}),(0,k.jsx)(j,{children:(0,k.jsx)("div",{className:"site-layout-background",children:(0,k.jsx)(a.A,{grid:{gutter:16,column:1},dataSource:e,renderItem:e=>(0,k.jsx)(a.A.Item,{children:(0,k.jsxs)(u.A,{title:e.email,style:{width:"100%"},children:[(0,k.jsx)(o.Ay,{style:{marginBottom:"10px",width:"100%"},onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;C(e),e&&w.setFieldsValue({email:e.email,password:"",currentPassword:""}),A(!0)}(e),children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),(0,k.jsx)(o.Ay,{style:{width:"100%"},onClick:()=>(e=>{C(e),x(!0)})(e),children:"G\u1eedi Email \u0110\u1eb7t L\u1ea1i M\u1eadt Kh\u1ea9u"})]})})})})}),(0,k.jsx)(c.A,{title:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",visible:y,onCancel:()=>{A(!1),C(null),w.resetFields()},footer:null,children:(0,k.jsxs)(r.A,{form:w,onFinish:async e=>{const{email:t,password:s,currentPassword:l}=e;try{const e=d.j.currentUser;if(e){const r=m.IX.credential(e.email,l);await(0,m.kZ)(e,r),t!==e.email&&await(0,m.Ww)(e,t),s&&await(0,m.f3)(e,s),n.Ay.success("C\u1eadp nh\u1eadt ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng"),i((i=>i.map((i=>i.uid===e.uid?{...i,email:t}:i)))),A(!1),w.resetFields()}}catch(r){console.error("Error updating user:",r),r.code,n.Ay.error("M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i kh\xf4ng \u0111\xfang")}},layout:"vertical",children:[(0,k.jsx)(r.A.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email",message:"Vui l\xf2ng nh\u1eadp email h\u1ee3p l\u1ec7!"}],children:(0,k.jsx)(h.A,{disabled:!0})}),(0,k.jsx)(r.A.Item,{name:"currentPassword",label:"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i!"}],children:(0,k.jsx)(h.A.Password,{})}),(0,k.jsx)(r.A.Item,{name:"password",label:"M\u1eadt kh\u1ea9u m\u1edbi",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi!"}],children:(0,k.jsx)(h.A.Password,{})}),(0,k.jsx)(r.A.Item,{children:(0,k.jsx)(o.Ay,{type:"primary",htmlType:"submit",children:"C\u1eadp nh\u1eadt"})})]})}),(0,k.jsx)(c.A,{title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",visible:t,onCancel:()=>{x(!1),C(null)},onOk:async()=>{try{await(0,m.J1)(d.j,b.email),p.oR.success("\u0110\xe3 g\u1eedi email \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),x(!1)}catch(e){console.error("L\u1ed7i khi g\u1eedi email \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u:",e),n.Ay.error("L\u1ed7i khi g\u1eedi email")}},okText:"G\u1eedi Email",cancelText:"H\u1ee7y",children:(0,k.jsxs)("p",{children:["Ch\xfang t\xf4i s\u1ebd g\u1eedi cho b\u1ea1n m\u1ed9t email v\xe0o ",null===b||void 0===b?void 0:b.email," \u0111\u1ec3 \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u."]})})]})}}}]);
//# sourceMappingURL=558.f5982525.chunk.js.map