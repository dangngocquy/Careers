"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[558],{9558:(e,i,n)=>{n.r(i),n.d(i,{default:()=>p});var l=n(5043),t=n(8964),s=n(9748),a=n(2019),r=n(3188),c=n(2006),h=n(2918),o=n(4417),u=n(7407),m=n(1966),d=n(5337),y=n(574),x=n(8797),k=n(3216),g=n(579);const{Content:j}=t.A,p=()=>{const[e,i]=(0,l.useState)([]),[n,p]=(0,l.useState)(!1),[A,w]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),[C]=s.A.useForm(),[T,b]=(0,l.useState)(null),[S,L]=(0,l.useState)(null),E=(0,k.Zp)();(0,l.useEffect)((()=>{const e=(0,x.hg)(y.j,(e=>{e?i([{uid:e.uid,email:e.email}]):E("/login")}));return()=>e()}),[E]);const I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b(e),e?C.setFieldsValue({email:e.email,password:""}):C.resetFields(),p(!0)},F=[{title:"Email",dataIndex:"email",key:"email"},{title:"Thao t\xe1c",key:"actions",render:(e,i)=>(0,g.jsxs)("span",{children:[(0,g.jsx)(r.Ay,{icon:(0,g.jsx)(u.A,{}),onClick:()=>I(i)}),(0,g.jsx)(r.Ay,{icon:(0,g.jsx)(m.A,{}),onClick:()=>(L(i),void w(!0)),style:{marginLeft:8}}),(0,g.jsx)(r.Ay,{onClick:()=>(L(i),void f(!0)),style:{marginLeft:8},children:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"})]})}];return(0,g.jsxs)(t.A,{className:"site-layout",children:[(0,g.jsx)("title",{children:"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n NISO"}),(0,g.jsx)(j,{style:{margin:"0 16px"},children:(0,g.jsxs)("div",{className:"site-layout-background",children:[(0,g.jsx)(r.Ay,{type:"primary",icon:(0,g.jsx)(d.A,{}),onClick:()=>I(),style:{marginTop:16,marginBottom:16},children:"Th\xeam t\xe0i kho\u1ea3n"}),(0,g.jsx)(c.A,{columns:F,dataSource:e,scroll:{x:!0},style:{width:"100%",whiteSpace:"nowrap"}})]})}),(0,g.jsx)(h.A,{title:T?"S\u1eeda th\xf4ng tin":"Th\xeam t\xe0i kho\u1ea3n",visible:n,onCancel:()=>{p(!1),b(null)},footer:null,children:(0,g.jsxs)(s.A,{form:C,onFinish:async e=>{const{email:n,password:l}=e;try{if(T){const e=y.j.currentUser;e&&(await(0,x.Ww)(e,n),l&&await(0,x.f3)(e,l),a.Ay.success("C\u1eadp nh\u1eadt ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng"),i((i=>i.map((i=>i.uid===e.uid?{...i,email:n}:i)))))}else{const e=(await(0,x.eJ)(y.j,n,l)).user;a.Ay.success("Th\xeam ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng"),i((i=>[...i,{uid:e.uid,email:e.email}]))}p(!1)}catch(t){console.error("Error handling user:",t),a.Ay.error("L\u1ed7i khi x\u1eed l\xfd")}},layout:"vertical",children:[(0,g.jsx)(s.A.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email",message:"Vui l\xf2ng nh\u1eadp email h\u1ee3p l\u1ec7!"}],children:(0,g.jsx)(o.A,{})}),(0,g.jsx)(s.A.Item,{name:"password",label:"M\u1eadt kh\u1ea9u",rules:[{required:!T,message:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u!"}],children:(0,g.jsx)(o.A.Password,{})}),(0,g.jsx)(s.A.Item,{children:(0,g.jsx)(r.Ay,{type:"primary",htmlType:"submit",children:T?"C\u1eadp nh\u1eadt":"Th\xeam"})})]})}),(0,g.jsx)(h.A,{title:"X\xe1c nh\u1eadn x\xf3a",visible:A,onCancel:()=>{w(!1),L(null)},onOk:async()=>{try{const e=y.j.currentUser;e&&e.uid===S.uid?(await(0,x.hG)(e),a.Ay.success("X\xf3a ng\u01b0\u1eddi d\xf9ng th\xe0nh c\xf4ng"),i((e=>e.filter((e=>e.uid!==S.uid))))):a.Ay.error("B\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 x\xf3a t\xe0i kho\u1ea3n c\u1ee7a ch\xednh m\xecnh"),w(!1)}catch(e){console.error("L\u1ed7i khi x\xf3a ng\u01b0\u1eddi d\xf9ng:",e),a.Ay.error("L\u1ed7i khi x\xf3a")}},okText:"X\xf3a",cancelText:"H\u1ee7y",children:(0,g.jsxs)("p",{children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a t\xe0i kho\u1ea3n ",null===S||void 0===S?void 0:S.email," kh\xf4ng?"]})}),(0,g.jsx)(h.A,{title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",visible:v,onCancel:()=>{f(!1),L(null)},onOk:async()=>{try{await(0,x.J1)(y.j,S.email),a.Ay.success("\u0110\xe3 g\u1eedi email \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u."),f(!1)}catch(e){console.error("L\u1ed7i khi g\u1eedi email \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u:",e),a.Ay.error("L\u1ed7i khi g\u1eedi email")}},okText:"G\u1eedi Email",cancelText:"H\u1ee7y",children:(0,g.jsxs)("p",{children:["Ch\xfang t\xf4i s\u1ebd g\u1eedi cho b\u1ea1n m\u1ed9t email v\xe0o ",null===S||void 0===S?void 0:S.email," \u0111\u1ec3 \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u."]})})]})}}}]);
//# sourceMappingURL=558.2b5a89bd.chunk.js.map